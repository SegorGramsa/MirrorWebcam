<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="stuff, to, help, search, engines, not" name="keywords">
<meta content="What this page is about." name="description">
<meta content="Mirror Webcam" name="title">
<title>Mirror Webcam</title>
  
<style>
body
{
   margin:0;
   padding: 0;
   border: 0;
}
#wc1, #wc2, #wc3, #wc4
{    
	float: left;
    width: 50%	;
    /*height: 800px;*/
    background-color: #666;
    margin:0;
    padding: 0;
    border: 0;
}
#wc2
{
    transform: rotateY(180deg);
    -webkit-transform:rotateY(180deg); /* Safari and Chrome */
    -moz-transform:rotateY(180deg); /* Firefox */
}
#wc3
{
    transform: rotateX(180deg);
    -webkit-transform:rotateX(180deg); /* Safari and Chrome */
    -moz-transform:rotateX(180deg); /* Firefox */
}
#wc4
{
    transform: rotate(180deg);
    -webkit-transform:rotate(180deg); /* Safari and Chrome */
    -moz-transform:rotate(180deg); /* Firefox */
}
</style>
</head>
  
<body>
<div id="menu">
<form oninput="filterHue = hueRange.value;
			   hueOutput.value = hueRange.value;
               updateFilter()">
	<label for="hueRange">hue rotate:</label>
	<input type="range" id="hueRange" name="hueRange" max="360">
	<output for="hueRange" name="hueOutput">0</output>
</form>
<form oninput="filterBrightness = brightnessRange.value;
			   BrightnessOutput.value = brightnessRange.value;
               updateFilter()">
	<label for="brightnessRange">brightness:</label>
	<input type="range" id="brightnessRange" name="brightnessRange" max="100">
	<output for="brightnessRange" name="BrightnessOutput">80</output>
</form>
<button type="button" id="invert-button" onclick="filterInvert = 100 - filterInvert; updateFilter()">invert</button>
</div>
<div>
	<video class="wc" autoplay id = "wc1"></video>
	<video class="wc" autoplay id = "wc2"></video>
</div>
<div>
	<video class="wc" autoplay id = "wc3"></video>
	<video class="wc" autoplay id = "wc4"></video>
</div>
<script>

var filterInvert = 100;
var filterHue = 0;
document.getElementById("hueRange").value = filterHue;
var filterBrightness = 80;
document.getElementById("brightnessRange").value = filterBrightness;
function updateFilter(){
	var videos = document.getElementsByClassName("wc");
	for(i = 0; i < videos.length; i++ ) {
		videos[i].style.filter = 'invert(' + filterInvert + '%) ' +  
		                         'hue-rotate(' + filterHue + 'deg) ' + 
								 'brightness(' + filterBrightness + '%) ';
	}
}
updateFilter();


var stream;
navigator.getMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
navigator.getMedia(
// constraints
{
    video:{
		width: {exact: 1920},
		height: {exact: 1080} }
},
// successCallback
function (localMediaStream) {
	stream = localMediaStream;
	var videos = document.getElementsByClassName("wc");
	for(i = 0; i < videos.length; i++ ) {	
		videos[i].src = window.URL.createObjectURL(localMediaStream);
	}

},
// errorCallback
function (err) {
    console.log("The following error occured: " + err);
});

</script>
</body>
</html>
